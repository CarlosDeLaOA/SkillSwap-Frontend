<div class="profile-wrapper">
  <main class="profile-main">
    <!-- Primera fila: Avatar e Información Personal -->
    <div class="profile-grid-top">
      <!-- COLUMNA IZQUIERDA: Avatar -->
      <aside class="avatar-card">
        <div class="avatar-circle">
          <img 
            *ngIf="profileService.person$().profilePhotoUrl; else initialsAvatar" 
            [src]="profileService.person$().profilePhotoUrl" 
            [alt]="profileService.person$().fullName"
          />
          <ng-template #initialsAvatar>
            <div class="avatar-initials">
              {{ getInitials(profileService.person$().fullName) }}
            </div>
          </ng-template>
        </div>
        <h3 class="user-role">{{ profileService.getUserRole() }}</h3>
      </aside>

      <!-- COLUMNA DERECHA: Información Personal -->
      <section class="info-card">
        <div class="card-header">
          <h3 class="section-title">Información personal</h3>
          <button class="btn-check">
            <box-icon name='check-circle' size="24px" color="#aae16b"></box-icon>
          </button>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>Nombre</label>
            <input 
              type="text" 
              [value]="getFirstName()" 
              placeholder="Nombre"
              readonly
            />
          </div>

          <div class="form-group">
            <label>Apellidos</label>
            <input 
              type="text" 
              [value]="getLastNames()" 
              placeholder="Apellidos"
              readonly
            />
          </div>

          <div class="form-group">
            <label>Correo electrónico</label>
            <input 
              type="email" 
              [value]="profileService.person$().email || ''" 
              placeholder="Correo electrónico"
              readonly
            />
          </div>

          <div class="form-group">
            <label>Contraseña</label>
            <input 
              type="password" 
              value="••••••••" 
              placeholder="Contraseña"
              readonly
            />
          </div>
        </div>
      </section>
    </div>

    <!-- Segunda fila: Habilidades a explorar (ancho completo) -->
    <section class="info-card skills-card">
      <div class="card-header">
        <h3 class="section-title">Habilidades a explorar</h3>
        <button class="btn-check">
          <box-icon name='check-circle' size="24px" color="#504ab7"></box-icon>
        </button>
      </div>

      <p class="card-subtitle">
        Ajusta tus habilidades a explorar para poder mostrarte contenido a tu medida.
      </p>

      <!-- Grid dinámico con TODAS las knowledge areas -->
      <div class="skills-grid">
        @for (area of getAllKnowledgeAreas(); track area.id) {
          <div class="form-group">
            <label>{{ getAreaDisplayName(area.name) }}</label>
            <div class="select-with-tags">
              @if (getSkillsForArea(area.name).length > 0) {
                <div class="tags-inside-select">
                  @for (userSkill of getSkillsForArea(area.name); track userSkill.id) {
                    <span class="tag-pill">{{ userSkill.skill?.name }}</span>
                  }
                </div>
              } @else {
                <span class="select-placeholder">Selecciona opciones</span>
              }
              <box-icon name='chevron-down' size="20px" color="#aae16b" class="select-arrow"></box-icon>
            </div>
          </div>
        }
      </div>
    </section>
  </main>
</div>