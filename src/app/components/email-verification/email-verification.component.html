<div class="verification-container">
  <div class="verification-card">
    
    <!-- Loading State -->
    <div *ngIf="verificationState === VerificationState.LOADING" class="state-content loading-state">
      <div class="spinner"></div>
      <h2>Verificando tu cuenta</h2>
      <p>Por favor espera mientras verificamos tu correo electrónico...</p>
    </div>

    <!-- Success State -->
    <div *ngIf="verificationState === VerificationState.SUCCESS" class="state-content success-state">
      <div class="icon-wrapper success-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h2>¡Verificación Exitosa!</h2>
      <p>{{ message }}</p>
      <p class="redirect-message">Serás redirigido al inicio de sesión en unos segundos...</p>
      <button class="btn btn-primary" (click)="goToLogin()">
        Ir a Iniciar Sesión
      </button>
    </div>

    <!-- Already Verified State -->
    <div *ngIf="verificationState === VerificationState.ALREADY_VERIFIED" class="state-content info-state">
      <div class="icon-wrapper info-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </div>
      <h2>Cuenta Ya Verificada</h2>
      <p>{{ message }}</p>
      <button class="btn btn-primary" (click)="goToLogin()">
        Iniciar Sesión
      </button>
    </div>

    <!-- Error State -->
    <div *ngIf="verificationState === VerificationState.ERROR" class="state-content error-state">
      <div class="icon-wrapper error-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
      </div>
      <h2>Error de Verificación</h2>
      <p>{{ message }}</p>

      <!-- Resend Form -->
      <div class="resend-section">
        <h3>Solicitar nuevo enlace</h3>
        <p class="resend-description">Ingresa tu correo electrónico para recibir un nuevo enlace de verificación.</p>
        
        <div class="form-group">
          <input 
            type="email" 
            class="form-control" 
            placeholder="correo@ejemplo.com"
            [(ngModel)]="email"
            [disabled]="resendLoading"
            (keyup.enter)="resendVerification()"
          />
        </div>

        <div *ngIf="resendMessage" class="alert" [ngClass]="{'alert-success': showResendSuccess, 'alert-error': !showResendSuccess}">
          {{ resendMessage }}
        </div>

        <button 
          class="btn btn-secondary" 
          (click)="resendVerification()"
          [disabled]="resendLoading"
        >
          <span *ngIf="!resendLoading">Reenviar Verificación</span>
          <span *ngIf="resendLoading" class="loading-text">
            <span class="mini-spinner"></span>
            Enviando...
          </span>
        </button>
      </div>

      <div class="additional-options">
        <p>¿Necesitas ayuda? <a href="/contact" class="link">Contáctanos</a></p>
        <p>¿No tienes cuenta? <a (click)="goToRegister()" class="link">Regístrate aquí</a></p>
      </div>
    </div>

  </div>
</div>
