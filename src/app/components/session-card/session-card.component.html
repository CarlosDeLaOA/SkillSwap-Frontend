<div class="session-card" [class.suggested]="isSuggested">
  
  <!-- ⭐ TAG DE RECOMENDACIÓN EN LA ESQUINA -->
  <div *ngIf="isSuggested" class="suggested-tag">
    <i class='bx bx-star'></i>
    <span class="tag-text">Coincides un </span>
    <span class="match-percentage" [class]="'score-' + getScoreColor()">
      {{ getMatchScorePercent() }}%
    </span>
  </div>

  <div class="session-content">
    <div class="session-header">
      <h3 class="session-title clickable" (click)="onViewDetails()">
        {{ session.title }}
      </h3>
      <span class="session-category badge" *ngIf="session.skill?.knowledgeArea?.name">
        <i class='bx bx-category-alt me-1'></i>
        {{ session.skill.knowledgeArea.name }}
      </span>
    </div>
    <p class="session-description">{{ session.description }}</p>
    
    <!--  RAZÓN DE LA SUGERENCIA DENTRO DE LA TARJETA -->
    <div *ngIf="isSuggested && reason" class="suggestion-reason">
      <i class='bx bx-info-circle'></i>
      <span>{{ reason }}</span>
    </div>
    
    <div class="session-meta">
      <span class="meta-item" *ngIf="session.instructor?.person?.fullName">
        <i class='bx bx-user-circle'></i>
        {{ session.instructor.person.fullName }}
      </span>
      <span class="meta-item" *ngIf="session.skill?.name">
        <i class='bx bx-purchase-tag'></i>
        {{ session.skill.name }}
      </span>
      <span class="meta-item" *ngIf="session.language">
        <i class='bx bx-world'></i>
        {{ getLanguageName(session.language) }}
      </span>
      <span class="meta-item" *ngIf="getAvailableSpots() > 0">
        <i class='bx bx-group'></i>
        {{ getAvailableSpots() }} cupos disponibles
      </span>
    </div>
  </div>
  
  <div class="session-info">
    <div class="session-datetime">
      <div class="info-item" *ngIf="session.scheduledDatetime">
        <i class='bx bx-calendar'></i>
        <div class="info-content">
          <span class="info-label">Fecha:</span>
          <span class="info-value">{{ formatDate(session.scheduledDatetime) }}</span>
        </div>
      </div>
      <div class="info-item" *ngIf="session.scheduledDatetime">
        <i class='bx bx-time-five'></i>
        <div class="info-content">
          <span class="info-label">Hora:</span>
          <span class="info-value">{{ formatTime(session.scheduledDatetime) }}</span>
        </div>
      </div>
      <div class="info-item" *ngIf="session.durationMinutes">
        <i class='bx bx-stopwatch'></i>
        <div class="info-content">
          <span class="info-label">Duración:</span>
          <span class="info-value">{{ session.durationMinutes }} min</span>
        </div>
      </div>
    </div>
    
    <button 
      class="btn btn-register" 
      (click)="onRegister()"
      [disabled]="getAvailableSpots() === 0">
      <i class='bx bx-check-circle me-1' *ngIf="getAvailableSpots() > 0"></i>
      <i class='bx bx-x-circle me-1' *ngIf="getAvailableSpots() === 0"></i>
      {{ getAvailableSpots() === 0 ? 'Lleno' : 'Registrarme' }}
    </button>
  </div>
</div>